import{bK as z}from"./vendor.9c15ff54.js";import{a as P}from"./htmlmixed.7c87b0f0.js";function F(m,k){return k.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(o){if(o!=="default"&&!(o in m)){var c=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(m,o,c.get?c:{enumerable:!0,get:function(){return r[o]}})}})}),Object.freeze(m)}var O={exports:{}};(function(m,k){(function(r){r(z.exports,P.exports)})(function(r){var o={noEndTag:!0,soyState:"param-def"},c={alias:{noEndTag:!0},delpackage:{noEndTag:!0},namespace:{noEndTag:!0,soyState:"namespace-def"},"@attribute":o,"@attribute?":o,"@param":o,"@param?":o,"@inject":o,"@inject?":o,"@state":o,template:{soyState:"templ-def",variableScope:!0},extern:{soyState:"param-def"},export:{soyState:"export"},literal:{},msg:{},fallbackmsg:{noEndTag:!0,reduceIndent:!0},select:{},plural:{},let:{soyState:"var-def"},if:{},javaimpl:{},jsimpl:{},elseif:{noEndTag:!0,reduceIndent:!0},else:{noEndTag:!0,reduceIndent:!0},switch:{},case:{noEndTag:!0,reduceIndent:!0},default:{noEndTag:!0,reduceIndent:!0},foreach:{variableScope:!0,soyState:"for-loop"},ifempty:{noEndTag:!0,reduceIndent:!0},for:{variableScope:!0,soyState:"for-loop"},call:{soyState:"templ-ref"},param:{soyState:"param-ref"},print:{noEndTag:!0},deltemplate:{soyState:"templ-def",variableScope:!0},delcall:{soyState:"templ-ref"},log:{},element:{variableScope:!0},velog:{},const:{soyState:"const-def"}},$=Object.keys(c).filter(function(l){return!c[l].noEndTag||c[l].reduceIndent});r.defineMode("soy",function(l){var v=r.getMode(l,"text/plain"),b={html:r.getMode(l,{name:"text/html",multilineTagIndentFactor:2,multilineTagIndentPastTag:!1,allowMissingTagName:!0}),attributes:v,text:v,uri:v,trusted_resource_uri:v,css:r.getMode(l,"text/css"),js:r.getMode(l,{name:"text/javascript",statementIndent:2*l.indentUnit})};function f(n){return n[n.length-1]}function T(n,e,t){if(n.sol()){for(var i=0;i<e.indent&&n.eat(/\s/);i++);if(i)return null}var d=n.string,u=t.exec(d.substr(n.pos));u&&(n.string=d.substr(0,n.pos+u.index));var a=n.hideFirstChars(e.indent,function(){var p=f(e.localStates);return p.mode.token(n,p.state)});return n.string=d,a}function _(n,e){for(;n;){if(n.element===e)return!0;n=n.next}return!1}function s(n,e){return{element:e,next:n}}function x(n){!n.context||(n.context.scope&&(n.variables=n.context.scope),n.context=n.context.previousContext)}function j(n,e,t){return _(n,e)?"variable-2":t?"variable":"variable-2 error"}function g(n,e,t){this.previousContext=n,this.tag=e,this.kind=null,this.scope=t}function S(n,e){var t;return n.match(/[[]/)?(e.soyState.push("list-literal"),e.context=new g(e.context,"list-literal",e.variables),e.lookupVariables=!1,null):n.match(/\bmap(?=\()/)?(e.soyState.push("map-literal"),"keyword"):n.match(/\brecord(?=\()/)?(e.soyState.push("record-literal"),"keyword"):n.match(/([\w]+)(?=\()/)?"variable callee":(t=n.match(/^["']/))?(e.soyState.push("string"),e.quoteKind=t[0],"string"):n.match(/^[(]/)?(e.soyState.push("open-parentheses"),null):n.match(/(null|true|false)(?!\w)/)||n.match(/0x([0-9a-fA-F]{2,})/)||n.match(/-?([0-9]*[.])?[0-9]+(e[0-9]*)?/)?"atom":n.match(/(\||[+\-*\/%]|[=!]=|\?:|[<>]=?)/)?"operator":(t=n.match(/^\$([\w]+)/))?j(e.variables,t[1],!e.lookupVariables):(t=n.match(/^\w+/))?/^(?:as|and|or|not|in|if)$/.test(t[0])?"keyword":null:(n.next(),null)}return{startState:function(){return{soyState:[],variables:s(null,"ij"),scopes:null,indent:0,quoteKind:null,context:null,lookupVariables:!0,localStates:[{mode:b.html,state:r.startState(b.html)}]}},copyState:function(n){return{tag:n.tag,soyState:n.soyState.concat([]),variables:n.variables,context:n.context,indent:n.indent,quoteKind:n.quoteKind,lookupVariables:n.lookupVariables,localStates:n.localStates.map(function(e){return{mode:e.mode,state:r.copyState(e.mode,e.state)}})}},token:function(n,e){var t;switch(f(e.soyState)){case"comment":if(n.match(/^.*?\*\//)?e.soyState.pop():n.skipToEnd(),!e.context||!e.context.scope)for(var i=/@param\??\s+(\S+)/g,d=n.current(),t;t=i.exec(d);)e.variables=s(e.variables,t[1]);return"comment";case"string":var t=n.match(/^.*?(["']|\\[\s\S])/);return t?t[1]==e.quoteKind&&(e.quoteKind=null,e.soyState.pop()):n.skipToEnd(),"string"}if(!e.soyState.length||f(e.soyState)!="literal"){if(n.match(/^\/\*/))return e.soyState.push("comment"),"comment";if(n.match(n.sol()?/^\s*\/\/.*/:/^\s+\/\/.*/))return"comment"}switch(f(e.soyState)){case"templ-def":return(t=n.match(/^\.?([\w]+(?!\.[\w]+)*)/))?(e.soyState.pop(),"def"):(n.next(),null);case"templ-ref":return(t=n.match(/(\.?[a-zA-Z_][a-zA-Z_0-9]+)+/))?(e.soyState.pop(),t[0][0]=="."?"variable-2":"variable"):(t=n.match(/^\$([\w]+)/))?(e.soyState.pop(),j(e.variables,t[1],!e.lookupVariables)):(n.next(),null);case"namespace-def":return(t=n.match(/^\.?([\w\.]+)/))?(e.soyState.pop(),"variable"):(n.next(),null);case"param-def":return(t=n.match(/^\*/))?(e.soyState.pop(),e.soyState.push("param-type"),"type"):(t=n.match(/^\w+/))?(e.variables=s(e.variables,t[0]),e.soyState.pop(),e.soyState.push("param-type"),"def"):(n.next(),null);case"param-ref":return(t=n.match(/^\w+/))?(e.soyState.pop(),"property"):(n.next(),null);case"open-parentheses":return n.match(/[)]/)?(e.soyState.pop(),null):S(n,e);case"param-type":var u=n.peek();return"}]=>,".indexOf(u)!=-1?(e.soyState.pop(),null):u=="["?(e.soyState.push("param-type-record"),null):u=="("?(e.soyState.push("param-type-template"),null):u=="<"?(e.soyState.push("param-type-parameter"),null):(t=n.match(/^([\w]+|[?])/))?"type":(n.next(),null);case"param-type-record":var u=n.peek();return u=="]"?(e.soyState.pop(),null):n.match(/^\w+/)?(e.soyState.push("param-type"),"property"):(n.next(),null);case"param-type-parameter":return n.match(/^[>]/)?(e.soyState.pop(),null):n.match(/^[<,]/)?(e.soyState.push("param-type"),null):(n.next(),null);case"param-type-template":return n.match(/[>]/)?(e.soyState.pop(),e.soyState.push("param-type"),null):n.match(/^\w+/)?(e.soyState.push("param-type"),"def"):(n.next(),null);case"var-def":return(t=n.match(/^\$([\w]+)/))?(e.variables=s(e.variables,t[1]),e.soyState.pop(),"def"):(n.next(),null);case"for-loop":return n.match(/\bin\b/)?(e.soyState.pop(),"keyword"):n.peek()=="$"?(e.soyState.push("var-def"),null):(n.next(),null);case"record-literal":return n.match(/^[)]/)?(e.soyState.pop(),null):n.match(/[(,]/)?(e.soyState.push("map-value"),e.soyState.push("record-key"),null):(n.next(),null);case"map-literal":return n.match(/^[)]/)?(e.soyState.pop(),null):n.match(/[(,]/)?(e.soyState.push("map-value"),e.soyState.push("map-value"),null):(n.next(),null);case"list-literal":return n.match("]")?(e.soyState.pop(),e.lookupVariables=!0,x(e),null):n.match(/\bfor\b/)?(e.lookupVariables=!0,e.soyState.push("for-loop"),"keyword"):S(n,e);case"record-key":return n.match(/[\w]+/)?"property":n.match(/^[:]/)?(e.soyState.pop(),null):(n.next(),null);case"map-value":return n.peek()==")"||n.peek()==","||n.match(/^[:)]/)?(e.soyState.pop(),null):S(n,e);case"import":return n.eat(";")?(e.soyState.pop(),e.indent-=2*l.indentUnit,null):n.match(/\w+(?=\s+as\b)/)?"variable":(t=n.match(/\w+/))?/\b(from|as)\b/.test(t[0])?"keyword":"def":(t=n.match(/^["']/))?(e.soyState.push("string"),e.quoteKind=t[0],"string"):(n.next(),null);case"tag":var a,p;e.tag===void 0?(a=!0,p=""):(a=e.tag[0]=="/",p=a?e.tag.substring(1):e.tag);var y=c[p];if(n.match(/^\/?}/)){var E=n.current()=="/}";return E&&!a&&x(e),e.tag=="/template"||e.tag=="/deltemplate"?(e.variables=s(null,"ij"),e.indent=0):e.indent-=l.indentUnit*(E||$.indexOf(e.tag)==-1?2:1),e.soyState.pop(),"keyword"}else if(n.match(/^([\w?]+)(?==)/)){if(e.context&&e.context.tag==p&&n.current()=="kind"&&(t=n.match(/^="([^"]+)/,!1))){var I=t[1];e.context.kind=I;var U=b[I]||b.html,h=f(e.localStates);h.mode.indent&&(e.indent+=h.mode.indent(h.state,"","")),e.localStates.push({mode:U,state:r.startState(U)})}return"attribute"}return S(n,e);case"template-call-expression":return n.match(/^([\w-?]+)(?==)/)?"attribute":n.eat(">")||n.eat("/>")?(e.soyState.pop(),"keyword"):S(n,e);case"literal":return n.match("{/literal}",!1)?(e.soyState.pop(),this.token(n,e)):T(n,e,/\{\/literal}/);case"export":if(t=n.match(/\w+/)){if(e.soyState.pop(),t=="const")return e.soyState.push("const-def"),"keyword";if(t=="extern")return e.soyState.push("param-def"),"keyword"}else n.next();return null;case"const-def":return n.match(/^\w+/)?(e.soyState.pop(),"def"):(n.next(),null)}if(n.match("{literal}"))return e.indent+=l.indentUnit,e.soyState.push("literal"),e.context=new g(e.context,"literal",e.variables),"keyword";if(t=n.match(/^\{([/@\\]?\w+\??)(?=$|[\s}]|\/[/*])/)){var K=e.tag;e.tag=t[1];var a=e.tag[0]=="/",V=!!c[e.tag],p=a?e.tag.substring(1):e.tag,y=c[p];e.tag!="/switch"&&(e.indent+=((a||y&&y.reduceIndent)&&K!="switch"?1:2)*l.indentUnit),e.soyState.push("tag");var w=!1;if(y){if(a||y.soyState&&e.soyState.push(y.soyState),!y.noEndTag&&(V||!a))e.context=new g(e.context,e.tag,y.variableScope?e.variables:null);else if(a){var q=p=="extern"&&e.context&&e.context.tag=="export";if(!e.context||e.context.tag!=p&&!q)w=!0;else if(e.context){if(e.context.kind){e.localStates.pop();var h=f(e.localStates);h.mode.indent&&(e.indent-=h.mode.indent(h.state,"",""))}x(e)}}}else a&&(w=!0);return(w?"error ":"")+"keyword"}else{if(n.eat("{"))return e.tag="print",e.indent+=2*l.indentUnit,e.soyState.push("tag"),"keyword";if(!e.context&&n.sol()&&n.match(/import\b/))return e.soyState.push("import"),e.indent+=2*l.indentUnit,"keyword";if(t=n.match("<{"))return e.soyState.push("template-call-expression"),e.indent+=2*l.indentUnit,e.soyState.push("tag"),"keyword";if(t=n.match("</>"))return e.indent-=1*l.indentUnit,"keyword"}return T(n,e,/\{|\s+\/\/|\/\*/)},indent:function(n,e,t){var i=n.indent,d=f(n.soyState);if(d=="comment")return r.Pass;if(d=="literal")/^\{\/literal}/.test(e)&&(i-=l.indentUnit);else{if(/^\s*\{\/(template|deltemplate)\b/.test(e))return 0;/^\{(\/|(fallbackmsg|elseif|else|ifempty)\b)/.test(e)&&(i-=l.indentUnit),n.tag!="switch"&&/^\{(case|default)\b/.test(e)&&(i-=l.indentUnit),/^\{\/switch\b/.test(e)&&(i-=l.indentUnit)}var u=f(n.localStates);return i&&u.mode.indent&&(i+=u.mode.indent(u.state,e,t)),i},innerMode:function(n){return n.soyState.length&&f(n.soyState)!="literal"?null:f(n.localStates)},electricInput:/^\s*\{(\/|\/template|\/deltemplate|\/switch|fallbackmsg|elseif|else|case|default|ifempty|\/literal\})$/,lineComment:"//",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",useInnerComments:!1,fold:"indent"}},"htmlmixed"),r.registerHelper("wordChars","soy",/[\w$]/),r.registerHelper("hintWords","soy",Object.keys(c).concat(["css","debugger"])),r.defineMIME("text/x-soy","soy")})})();var D=O.exports,W=Object.freeze(F({__proto__:null,[Symbol.toStringTag]:"Module",default:D},[O.exports]));export{W as s};
